{% extends 'base.html' %}
{% block content %}

<style>
    .scroll-box {
        width: 300px;
        height: 300px;
        overflow: auto;
        border: 1px solid #ccc;
        padding: 10px;
    }
</style>
<div class="row">
    <div class="col-md-8 mt-2">
        <h2 class="text-center text-warning">Welcome {{ session['username'] }}</h2>
    </div>
    <div class="col-md-4 mt-3">
        <a href="" class="border-2 text-bg-light rounded-3 bg-body-secondary p-2" style="text-decoration: none;">History</a>
    </div>
</div>
<div class="bg-light container mt-4 w-50 border rounded-3 p-4 scroll-box">
    <h4>Departments</h4>
    <div class="card p-3">
        {% for dept in departments %}
        <div class="d-flex justify-content-between align-items-center border p-2 mb-2 rounded">
            <span>{{ dept.department_name }}</span>
            <a href="{{ url_for('department_details', dept_id=dept.id) }}" class="btn btn-sm btn-primary">view details</a>
        </div>
        {% endfor %}

    </div>

</div>
<div class=" bg-light container mt-4 w-50 border rounded-3 p-4 scroll-box">
    <div class="upcomg-appt">
        <h4>Upcoming Appointments</h4>
        <div class="card p-3">
        <table class="table table-bordered table-hover">
            <thead class="table-secondary">
                <tr>
                    <th>Sr. No.</th>
                    <th>Doctor Name</th>
                    <th>Deptt</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% if appointments %}
                    {% for appt in appointments %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ appt.doctor.username }}</td>
                        <td>{{ appt.doctor.specialization }}</td>
                        <td>{{ appt.date }}</td>
                        <td>{{ appt.time }}</td>
                        <td>
                            <a href="{{ url_for('patient_cancel_appointment', appointment_id=appt.id) }}" 
                            class="btn btn-danger btn-sm">Cancel</a>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" class="text-center text-muted">
                            No upcoming appointments.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
        </div>
    </div>
</div>
{% endblock %}